<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vyna.live Assistant</title>
  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            maroon: '#5D1C34',
            golden: '#A67D44',
            sage: '#899481',
            taupe: '#CDBCAB',
            cream: '#EFE9E1',
          },
          borderRadius: {
            lg: '14px',
          },
          backdropBlur: {
            xs: '2px',
          },
          backgroundColor: {
            'zinc-800/40': 'rgba(39, 39, 42, 0.4)',
            'zinc-800/50': 'rgba(39, 39, 42, 0.5)',
            'zinc-900/80': 'rgba(24, 24, 27, 0.8)',
          }
        }
      }
    }
  </script>
  <link rel="stylesheet" href="../styles/enhanced-popup.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="app-container" id="app">
    <!-- Auth screens will be rendered here if not authenticated -->
    
    <!-- Main app interface -->
    <div class="main-interface" style="display: none;">
      <!-- Header -->
      <div class="header">
        <div class="logo">
          <img src="../assets/logo.png" alt="Vyna.live" height="28">
        </div>
        <div class="user-profile" id="userProfile">
          <div class="avatar">
            <img id="userAvatar" src="../assets/user-avatar.png" alt="User" width="24" height="24">
          </div>
          <div class="username" id="username">Username</div>
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ml-1" style="margin-left: 5px">
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
          <div class="user-dropdown" id="userDropdown">
            <div class="dropdown-item" id="logoutButton">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
              </svg>
              Logout
            </div>
          </div>
        </div>
      </div>
      
      <!-- Tabs -->
      <div class="tabs">
        <div class="tab active" data-tab="vynaai">VynaAI</div>
        <div class="tab" data-tab="notepad">Notepad</div>
      </div>
      
      <!-- Content area -->
      <div class="content">
        <!-- VynaAI tab -->
        <div class="tab-content active" id="vynaai-content">
          <!-- This will be populated dynamically -->
        </div>
        
        <!-- Notepad tab -->
        <div class="tab-content" id="notepad-content">
          <!-- This will be populated dynamically -->
        </div>
      </div>
    </div>
  </div>
  
  <!-- Templates -->
  <!-- Main Interface Template -->
  <template id="main-interface-template">
    <div class="main-interface">
      <!-- Header -->
      <div class="header">
        <div class="logo">
          <img src="../assets/logo.png" alt="Vyna.live" height="28">
        </div>
        <div class="user-profile" id="userProfile">
          <div class="avatar">
            <img id="userAvatar" src="../assets/user-avatar.png" alt="User" width="24" height="24">
          </div>
          <div class="username" id="username">Username</div>
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ml-1" style="margin-left: 5px">
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
          <div class="user-dropdown" id="userDropdown">
            <div class="dropdown-item" id="logoutButton">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
              </svg>
              Logout
            </div>
          </div>
        </div>
      </div>
      
      <!-- Tabs -->
      <div class="tabs">
        <div class="tab active" data-tab="vynaai">VynaAI</div>
        <div class="tab" data-tab="notepad">Notepad</div>
      </div>
      
      <!-- Content area -->
      <div class="content">
        <!-- VynaAI tab -->
        <div class="tab-content active" id="vynaai-content">
          <!-- This will be populated dynamically -->
        </div>
        
        <!-- Notepad tab -->
        <div class="tab-content" id="notepad-content">
          <!-- This will be populated dynamically -->
        </div>
      </div>
    </div>
  </template>

  <!-- Auth Screen Template - Simplified to match design in Extension Login.png -->
  <template id="auth-template">
    <div class="auth-screen">
      <div class="auth-container">
        <!-- Logo - Centered with name "Vyna.live" as in the design -->
        <div class="auth-logo">
          <img src="../assets/logo.png" alt="Vyna.live" height="60">
        </div>

        <!-- Error message -->
        <div class="error-message" id="authError" style="display: none;">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="8" x2="12" y2="12"></line>
            <line x1="12" y1="16" x2="12.01" y2="16"></line>
          </svg>
          <span id="authErrorMessage"></span>
        </div>

        <!-- Login form - Simplified to match design -->
        <div class="login-form" id="loginForm">
          <div class="form-group">
            <input type="text" id="loginUsername" placeholder="Email address" class="login-input-field">
          </div>
          
          <div class="form-group">
            <input type="password" id="loginPassword" placeholder="Password" class="login-input-field">
          </div>
          
          <button class="login-button" id="loginButton">Login</button>
          
          <div class="or-divider">
            <div class="divider-line"></div>
            <span>or</span>
            <div class="divider-line"></div>
          </div>
          
          <button class="google-button" id="googleButton">
            <img src="../assets/google-icon.svg" alt="Google" class="google-icon" width="20" height="20">
            Sign up with Google
          </button>
        </div>
      </div>
    </div>
  </template>
  
  <!-- VynaAI Chat Sessions List Template -->
  <template id="chat-sessions-template">
    <div class="chat-list">
      <!-- Dynamic chat sessions will be inserted here -->
    </div>
    <button class="new-chat-button" id="newChatButton">
      <span class="plus-icon">+</span> New Chat
    </button>
  </template>
  
  <!-- Chat Session Item Template -->
  <template id="chat-session-item-template">
    <div class="chat-session">
      <div class="chat-session-title"></div>
    </div>
  </template>
  
  <!-- VynaAI Chat Interface Template -->
  <template id="chat-interface-template">
    <div class="chat-container">
      <div class="chat-header">
        <div class="back-button" id="backToSessions">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 18L9 12L15 6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <div class="chat-title" id="chatTitle">New Chat</div>
      </div>
      
      <div class="messages-container" id="messagesContainer">
        <!-- Messages will be dynamically inserted here -->
        <!-- Empty state -->
        <div class="empty-state" id="chatEmptyState">
          <div class="empty-state-icon">
            <!-- Vyna logo with a simpler design -->
            <div class="avatar" style="width: 40px; height: 40px; margin: 0 auto; margin-bottom: 16px;">
              <span style="color: #ffffff; font-size: 20px; font-weight: 600;">V</span>
            </div>
          </div>
          <h3 style="font-size: 18px; font-weight: 600; color: #ffffff; margin-bottom: 8px;">Vyna AI Assistant</h3>
          <p style="font-size: 14px; color: #9e9e9e; max-width: 280px; margin: 0 auto; line-height: 1.4;">Ask me anything! I can help with research, facts, and creative ideas for your stream.</p>
        </div>
      </div>
      
      <div class="chat-input-container">
        <div class="commentary-select">
          <div class="commentary-option active" data-style="color">CC</div>
          <div class="commentary-option" data-style="play-by-play">PP</div>
        </div>
        <div class="chat-input-wrapper">
          <textarea class="chat-input" id="chatInput" placeholder="Type your message here..."></textarea>
          <div class="input-buttons">
            <button class="input-button" id="docButton" title="Upload document">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"></path>
              </svg>
            </button>
            <button class="input-button" id="imageButton" title="Upload image">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
          </div>
          <button class="send-button" id="sendButton" disabled>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="22" y1="2" x2="11" y2="13"></line>
              <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
            </svg>
          </button>
        </div>
      </div>
      
      <!-- Hidden file inputs -->
      <input type="file" id="fileInput" class="hidden" accept=".pdf,.doc,.docx,.txt">
      <input type="file" id="imageInput" class="hidden" accept="image/*">
    </div>
  </template>
  
  <!-- Message Template -->
  <template id="message-template">
    <div class="message">
      <!-- AI avatar with Vyna logo/initial -->
      <div class="avatar">
        <span style="color: #ffffff; font-size: 14px; font-weight: 600;">V</span>
      </div>
      <div class="message-content"></div>
    </div>
  </template>
  
  <!-- Notepad List Template -->
  <template id="notepad-list-template">
    <div class="flex flex-col h-full bg-black rounded-lg">
      <!-- Header -->
      <div class="text-center py-5">
        <h2 class="text-xl font-medium text-white">Research Notes</h2>
        <p class="text-sm text-zinc-400 mt-1">Save important information for your stream</p>
      </div>

      <!-- RECENTS Label -->
      <div class="px-4 py-2">
        <h3 class="text-xs font-medium text-zinc-500 tracking-wide">RECENTS</h3>
      </div>
      
      <!-- Notes list -->
      <div class="flex-1 overflow-y-auto px-4">
        <div id="notes-list" class="space-y-3 mb-4">
          <!-- Notes will be listed here -->
        </div>

        <!-- Empty state -->
        <div id="empty-notes" class="flex flex-col items-center justify-center py-8 text-center" style="display: none;">
          <h3 class="text-white text-lg font-medium mb-1">No notes yet</h3>
          <p class="text-zinc-400 text-sm mb-4">Save important information for your streams</p>
          <div class="relative w-full mt-4">
            <input type="text" placeholder="Type a new note" class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-4 h-[54px] text-sm text-white placeholder-zinc-500 outline-none focus:border-zinc-600">
            <div class="absolute left-3 bottom-3 flex space-x-3 text-zinc-500">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"></path>
              </svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M8 11a5 5 0 0 1 10 0v4M8 15h8"></path>
                <circle cx="12" cy="19" r="2"></circle>
              </svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </div>
            <button id="empty-new-note-button" class="absolute right-3 bottom-3 px-3 py-1 text-sm font-medium bg-white text-black rounded-full">
              Add note
            </button>
          </div>
        </div>
      </div>
    </div>
  </template>
  
  <!-- Note Editor Template -->
  <template id="note-editor-template">
    <div class="flex flex-col h-full bg-black rounded-lg">
      <!-- Header with back arrow and note title -->
      <div class="flex items-center p-4">
        <button class="text-zinc-400 hover:text-white transition-colors back-button mr-3">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 18l-6-6 6-6" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </button>
        <input type="text" id="noteTitle" placeholder="Note title" class="bg-transparent border-none text-white text-lg font-medium outline-none w-full">
        <svg width="20" height="20" class="ml-2 text-zinc-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="6 9 12 15 18 9" stroke-linecap="round" stroke-linejoin="round"></polyline>
        </svg>
      </div>

      <!-- Content area -->
      <div class="flex-1 overflow-y-auto px-4 py-2">
        <div class="space-y-2" id="note-lines">
          <!-- Note lines will be dynamically inserted here -->
        </div>
      </div>

      <!-- Bottom input area -->
      <div class="p-4 border-t border-zinc-800">
        <div class="relative">
          <input type="text" id="noteInput" placeholder="Type a new note" class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-4 h-[54px] text-sm text-white placeholder-zinc-500 outline-none focus:border-zinc-600">
          <div class="absolute left-3 bottom-3 flex space-x-3 text-zinc-500">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"></path>
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M8 11a5 5 0 0 1 10 0v4M8 15h8"></path>
              <circle cx="12" cy="19" r="2"></circle>
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <circle cx="8.5" cy="8.5" r="1.5"></circle>
              <polyline points="21 15 16 10 5 21"></polyline>
            </svg>
          </div>
          <button id="addLineButton" class="absolute right-3 bottom-3 px-3 py-1 text-sm font-medium bg-white text-black rounded-full disabled:opacity-50 disabled:bg-zinc-600 disabled:text-zinc-300">
            Add note
          </button>
        </div>
      </div>
    </div>
  </template>
  
  <!-- Note Viewer Template -->
  <template id="note-viewer-template">
    <div class="flex flex-col h-full bg-black rounded-lg">
      <!-- Header with back arrow and note title -->
      <div class="flex items-center justify-between p-4 border-b border-zinc-800">
        <div class="flex items-center">
          <button class="text-zinc-400 hover:text-white transition-colors back-button mr-3">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M15 18l-6-6 6-6" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </button>
          <h2 id="note-view-title" class="text-white text-lg font-medium"></h2>
        </div>
        <div class="flex items-center space-x-3">
          <button class="text-zinc-400 hover:text-white transition-colors">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
            </svg>
          </button>
          <button id="editNoteButton" class="text-zinc-400 hover:text-white transition-colors">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="12" y1="5" x2="12" y2="19"></line>
              <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
          </button>
        </div>
      </div>
      
      <!-- Content area -->
      <div class="flex-1 overflow-y-auto p-4">
        <div id="note-view-content" class="space-y-2 text-zinc-200">
          <!-- Note content will be dynamically inserted here as paragraphs -->
        </div>
      </div>

      <!-- Bottom input area -->
      <div class="p-4 border-t border-zinc-800">
        <div class="relative">
          <input type="text" placeholder="Add a comment..." class="w-full bg-zinc-800 border border-zinc-700 rounded-lg p-4 h-[54px] text-sm text-white placeholder-zinc-500 outline-none focus:border-zinc-600">
          <div class="absolute left-3 bottom-3 flex space-x-3 text-zinc-500">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"></path>
            </svg>
          </div>
          <button class="absolute right-3 bottom-3 px-3 py-1 text-sm font-medium bg-white text-black rounded-full">
            Comment
          </button>
        </div>
      </div>
    </div>
  </template>
  
  <!-- Note Item Template -->
  <template id="note-item-template">
    <div class="note-item bg-zinc-800/50 rounded-lg p-4 cursor-pointer hover:bg-zinc-800 transition-colors">
      <div class="flex justify-between items-start">
        <h3 class="note-title font-medium text-white text-md mb-1 truncate"></h3>
        <div class="text-xs text-zinc-500 note-date ml-2 shrink-0"></div>
      </div>
      <p class="note-preview text-sm text-zinc-400 line-clamp-2 break-all"></p>
    </div>
  </template>

  <!-- Load our enhanced JavaScript -->
  <script src="enhanced-popup.js"></script>
</body>
</html>