<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vyna.live Assistant</title>
  <link rel="stylesheet" href="../styles/enhanced-popup.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="app-container" id="app">
    <!-- Auth screens will be rendered here if not authenticated -->
    
    <!-- Main app interface -->
    <div class="main-interface" style="display: none;">
      <!-- Header -->
      <div class="header">
        <div class="logo">
          <img src="../assets/logo.png" alt="Vyna.live" height="28">
        </div>
        <div class="user-profile" id="userProfile">
          <div class="avatar">
            <img id="userAvatar" src="../assets/user-avatar.png" alt="User" width="24" height="24">
          </div>
          <div class="username" id="username">Username</div>
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ml-1" style="margin-left: 5px">
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
          <div class="user-dropdown" id="userDropdown">
            <div class="dropdown-item" id="logoutButton">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
              </svg>
              Logout
            </div>
          </div>
        </div>
      </div>
      
      <!-- Tabs -->
      <div class="tabs">
        <div class="tab active" data-tab="vynaai">VynaAI</div>
        <div class="tab" data-tab="notepad">Notepad</div>
      </div>
      
      <!-- Content area -->
      <div class="content">
        <!-- VynaAI tab -->
        <div class="tab-content active" id="vynaai-content">
          <!-- This will be populated dynamically -->
        </div>
        
        <!-- Notepad tab -->
        <div class="tab-content" id="notepad-content">
          <!-- This will be populated dynamically -->
        </div>
      </div>
    </div>
  </div>
  
  <!-- Templates -->
  <!-- Main Interface Template -->
  <template id="main-interface-template">
    <div class="main-interface">
      <!-- Header -->
      <div class="header">
        <div class="logo">
          <img src="../assets/logo.png" alt="Vyna.live" height="28">
        </div>
        <div class="user-profile" id="userProfile">
          <div class="avatar">
            <img id="userAvatar" src="../assets/user-avatar.png" alt="User" width="24" height="24">
          </div>
          <div class="username" id="username">Username</div>
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ml-1" style="margin-left: 5px">
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
          <div class="user-dropdown" id="userDropdown">
            <div class="dropdown-item" id="logoutButton">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
              </svg>
              Logout
            </div>
          </div>
        </div>
      </div>
      
      <!-- Tabs -->
      <div class="tabs">
        <div class="tab active" data-tab="vynaai">VynaAI</div>
        <div class="tab" data-tab="notepad">Notepad</div>
      </div>
      
      <!-- Content area -->
      <div class="content">
        <!-- VynaAI tab -->
        <div class="tab-content active" id="vynaai-content">
          <!-- This will be populated dynamically -->
        </div>
        
        <!-- Notepad tab -->
        <div class="tab-content" id="notepad-content">
          <!-- This will be populated dynamically -->
        </div>
      </div>
    </div>
  </template>

  <!-- Auth Screen Template -->
  <template id="auth-template">
    <div class="auth-screen">
      <div class="auth-container">
        <!-- Logo -->
        <div class="auth-logo">
          <img src="../assets/logo.png" alt="Vyna.live" height="40">
        </div>

        <!-- Authentication container -->
        <div class="auth-content">
          <div class="auth-header">
            <h2>Welcome to Vyna.live</h2>
            <p>Sign in to continue or create a new account.</p>
          </div>
          
          <!-- Error message -->
          <div class="error-message" id="authError" style="display: none;">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="8" x2="12" y2="12"></line>
              <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
            <span id="authErrorMessage"></span>
          </div>
          
          <!-- Tabs for login/register -->
          <div class="auth-tabs">
            <div class="auth-tabs-list">
              <div class="auth-tab active" data-tab="login">Login</div>
              <div class="auth-tab" data-tab="register">Register</div>
            </div>
            
            <!-- Login form -->
            <div class="auth-tab-content active" id="login-content">
              <div class="auth-form" id="loginForm">
                <div class="form-group">
                  <label for="loginUsername">Username or Email</label>
                  <div class="input-with-icon">
                    <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M22 17.5l-8.4 4.2c-1.3.7-2.9.7-4.2 0L1 17.5M2 8.4l8.4-4.2c1.3-.7 2.9-.7 4.2 0L23 8.4M2 12l8.4-4.2c1.3-.7 2.9-.7 4.2 0L23 12M2 15.6l8.4-4.2c1.3-.7 2.9-.7 4.2 0L23 15.6"/>
                    </svg>
                    <input type="text" id="loginUsername" placeholder="Enter username or email" class="input-field">
                  </div>
                </div>
                
                <div class="form-group">
                  <label for="loginPassword">Password</label>
                  <div class="input-with-icon">
                    <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                      <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                    </svg>
                    <input type="password" id="loginPassword" placeholder="Enter password" class="input-field">
                  </div>
                </div>
                
                <button class="auth-button" id="loginButton">
                  <span class="button-icon">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
                      <polyline points="10 17 15 12 10 7"/>
                      <line x1="15" y1="12" x2="3" y2="12"/>
                    </svg>
                  </span>
                  Sign in
                </button>
              </div>
            </div>
            
            <!-- Registration form -->
            <div class="auth-tab-content" id="register-content">
              <div class="auth-form" id="registerForm">
                <div class="form-group">
                  <label for="registerUsername">Username</label>
                  <div class="input-with-icon">
                    <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                      <circle cx="12" cy="7" r="4"/>
                    </svg>
                    <input type="text" id="registerUsername" placeholder="Choose a username" class="input-field">
                  </div>
                </div>
                
                <div class="form-group">
                  <label for="registerEmail">Email</label>
                  <div class="input-with-icon">
                    <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M22 17.5l-8.4 4.2c-1.3.7-2.9.7-4.2 0L1 17.5M2 8.4l8.4-4.2c1.3-.7 2.9-.7 4.2 0L23 8.4M2 12l8.4-4.2c1.3-.7 2.9-.7 4.2 0L23 12M2 15.6l8.4-4.2c1.3-.7 2.9-.7 4.2 0L23 15.6"/>
                    </svg>
                    <input type="email" id="registerEmail" placeholder="Enter your email" class="input-field">
                  </div>
                </div>
                
                <div class="form-group">
                  <label for="registerPassword">Password</label>
                  <div class="input-with-icon">
                    <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                      <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                    </svg>
                    <input type="password" id="registerPassword" placeholder="Create a password" class="input-field">
                  </div>
                </div>
                
                <div class="form-group">
                  <label for="registerConfirmPassword">Confirm Password</label>
                  <div class="input-with-icon">
                    <svg class="input-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                      <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                    </svg>
                    <input type="password" id="registerConfirmPassword" placeholder="Confirm your password" class="input-field">
                  </div>
                </div>
                
                <button class="auth-button" id="registerButton">
                  <span class="button-icon">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                      <circle cx="9" cy="7" r="4"/>
                      <line x1="19" y1="8" x2="19" y2="14"/>
                      <line x1="16" y1="11" x2="22" y2="11"/>
                    </svg>
                  </span>
                  Create account
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </template>
  
  <!-- VynaAI Chat Sessions List Template -->
  <template id="chat-sessions-template">
    <div class="chat-list">
      <!-- Dynamic chat sessions will be inserted here -->
    </div>
    <button class="new-chat-button" id="newChatButton">
      <span class="plus-icon">+</span> New Chat
    </button>
  </template>
  
  <!-- Chat Session Item Template -->
  <template id="chat-session-item-template">
    <div class="chat-session">
      <div class="chat-session-title"></div>
    </div>
  </template>
  
  <!-- VynaAI Chat Interface Template -->
  <template id="chat-interface-template">
    <div class="chat-container">
      <div class="chat-header">
        <div class="back-button" id="backToSessions">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 18L9 12L15 6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <div class="chat-title" id="chatTitle">New Chat</div>
      </div>
      
      <div class="messages-container" id="messagesContainer">
        <!-- Messages will be dynamically inserted here -->
        <!-- Empty state -->
        <div class="empty-state" id="chatEmptyState">
          <div class="empty-state-icon">
            <svg width="32" height="32" viewBox="0 0 36 36" fill="none">
              <path d="M18.0002 0L23.6784 6.69459H12.3219L18.0002 0Z" fill="#40C4D0"/>
              <path d="M12.3219 6.69458L18.0002 0L18.0002 6.69458H12.3219Z" fill="#65D3DC"/>
              <path d="M23.6781 6.69458L18 0L18 6.69458H23.6781Z" fill="#1AA7B3"/>
              <path d="M0 18.0002L6.69459 12.3219V23.6784L0 18.0002Z" fill="#65D3DC"/>
              <path d="M6.69458 23.6781L0 18L6.69458 18L6.69458 23.6781Z" fill="#1AA7B3"/>
              <path d="M6.69458 12.3219L0 18L6.69458 18L6.69458 12.3219Z" fill="#40C4D0"/>
              <path d="M36.0002 18.0002L29.3056 23.6784V12.3219L36.0002 18.0002Z" fill="#40C4D0"/>
              <path d="M29.3054 12.3219L36 18L29.3054 18L29.3054 12.3219Z" fill="#1AA7B3"/>
              <path d="M29.3054 23.6781L36 18L29.3054 18L29.3054 23.6781Z" fill="#65D3DC"/>
              <path d="M18.0002 36.0002L12.3219 29.3056H23.6784L18.0002 36.0002Z" fill="#40C4D0"/>
              <path d="M23.6781 29.3054L18 36L18 29.3054H23.6781Z" fill="#65D3DC"/>
              <path d="M12.3219 29.3054L18 36L18 29.3054H12.3219Z" fill="#1AA7B3"/>
              <path d="M18 11.6393L11.6393 18L18 24.3607L24.3607 18L18 11.6393Z" fill="#133C40"/>
            </svg>
          </div>
          <h3>VynaAI</h3>
          <p>Ask questions to quickly research topics while streaming</p>
        </div>
      </div>
      
      <div class="chat-input-container">
        <div class="commentary-select">
          <div class="commentary-option active" data-style="color">CC</div>
          <div class="commentary-option" data-style="play-by-play">PP</div>
        </div>
        <div class="chat-input-wrapper">
          <textarea class="chat-input" id="chatInput" placeholder="Type your message here..."></textarea>
          <div class="input-buttons">
            <button class="input-button" id="docButton" title="Upload document">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"></path>
              </svg>
            </button>
            <button class="input-button" id="imageButton" title="Upload image">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                <polyline points="21 15 16 10 5 21"></polyline>
              </svg>
            </button>
          </div>
          <button class="send-button" id="sendButton" disabled>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="22" y1="2" x2="11" y2="13"></line>
              <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
            </svg>
          </button>
        </div>
      </div>
      
      <!-- Hidden file inputs -->
      <input type="file" id="fileInput" class="hidden" accept=".pdf,.doc,.docx,.txt">
      <input type="file" id="imageInput" class="hidden" accept="image/*">
    </div>
  </template>
  
  <!-- Message Template -->
  <template id="message-template">
    <div class="message">
      <div class="avatar" style="display: none;">
        <img src="" alt="" width="24" height="24">
      </div>
      <div class="message-content"></div>
    </div>
  </template>
  
  <!-- Notepad List Template -->
  <template id="notepad-list-template">
    <div class="notes-list">
      <!-- Dynamic notes will be inserted here -->
    </div>
    <button class="new-chat-button" id="newNoteButton">
      <span class="plus-icon">+</span> New Note
    </button>
  </template>
  
  <!-- Note Item Template -->
  <template id="note-item-template">
    <div class="note-item">
      <div class="note-title"></div>
      <div class="note-preview"></div>
    </div>
  </template>
  
  <!-- Note Editor Template -->
  <template id="note-editor-template">
    <div class="note-editor-container">
      <div class="note-editor-header">
        <div class="back-button" id="backToNotes">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 18L9 12L15 6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <button class="save-note-button" id="saveNoteButton" disabled>Save</button>
      </div>
      
      <div class="note-lines">
        <!-- Note lines will be dynamically inserted here -->
      </div>
      
      <div class="note-input-container">
        <div class="note-input-wrapper">
          <div class="note-input-field">
            <input type="text" id="noteInput" class="note-input" placeholder="Add a new line">
          </div>
          <button class="add-line-button" id="addLineButton" disabled>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 8px">
              <path d="M12 5v14M5 12h14" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Add Line
          </button>
        </div>
      </div>
    </div>
  </template>
  
  <!-- Note Viewer Template -->
  <template id="note-viewer-template">
    <div class="note-viewer-container">
      <div class="note-viewer-header">
        <div class="back-button" id="backToNotes">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 18L9 12L15 6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <button class="input-button" id="editNoteButton" title="Edit note">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M18.5 2.5C18.8978 2.10217 19.4374 1.87868 20 1.87868C20.5626 1.87868 21.1022 2.10217 21.5 2.5C21.8978 2.89782 22.1213 3.43739 22.1213 4C22.1213 4.56261 21.8978 5.10217 21.5 5.5L12 15L8 16L9 12L18.5 2.5Z" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
      
      <div class="note-viewer-content">
        <h1 id="noteTitle" class="note-viewer-title"></h1>
        <div id="noteContent" class="note-viewer-text">
          <!-- Note content will be dynamically inserted here -->
        </div>
      </div>
    </div>
  </template>
  
  <!-- Load our enhanced JavaScript -->
  <script src="enhanced-popup.js"></script>
</body>
</html>